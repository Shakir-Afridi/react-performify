import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{r as a}from"./iframe-B5RI7VXb.js";import"./preload-helper-PPVm8Dsz.js";function f(n,r){const[,d]=a.useState({}),o=a.useRef({deps:r,value:void 0}),s=r.length!==o.current.deps.length||r.some((u,c)=>u!==o.current.deps[c]);return a.useEffect(()=>{s&&(o.current={deps:r,value:void 0},d({}))},[s,r]),o.current.value===void 0&&(o.current.value=n(),d({})),o.current.value}const g=({size:n=1e6})=>{const[r,d]=a.useState(0),[o,s]=a.useState([]),[u,c]=a.useState(!1),m=t=>s(i=>[...i,t]),p=f(()=>{const t=performance.now();m("ðŸ” Running expensive computation...");const i=Array.from({length:n},(y,h)=>h*r),x=performance.now()-t;return m(`âœ… Computation finished in ${x.toFixed(2)} ms`),{data:i,duration:x}},[r,n]);return e.jsxs("div",{style:{padding:"20px",fontFamily:"system-ui, sans-serif",maxWidth:500,margin:"0 auto"},children:[e.jsx("h3",{children:"useLazyMemo Hook Demo"}),e.jsxs("p",{children:["The computation below runs ",e.jsx("strong",{children:"only when accessed"}),", not during initial render."]}),e.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"12px"},children:[e.jsx("button",{onClick:()=>{c(!0),s([])},style:{padding:"8px 14px",background:"#0984e3",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Show Result"}),e.jsx("button",{onClick:()=>{d(t=>t+1),s([]),c(!0)},style:{padding:"8px 14px",background:"#00b894",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Recompute"})]}),u&&p&&e.jsxs("div",{style:{background:"#f8f9fa",borderRadius:"8px",padding:"10px 14px",marginBottom:"14px",border:"1px solid #dee2e6"},children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Computation time:"})," ",p.duration.toFixed(2)," ms"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"First 5 values:"})," ",p.data.slice(0,5).join(", ")," ..."]})]}),e.jsxs("div",{style:{background:"#1e272e",color:"#d2dae2",fontFamily:"monospace",padding:"10px",borderRadius:"8px",fontSize:"13px",minHeight:"80px",whiteSpace:"pre-wrap",overflowY:"auto"},children:[e.jsx("strong",{style:{color:"#05c46b"},children:"Logs:"}),e.jsx("br",{}),o.length>0?o.map((t,i)=>e.jsx("div",{children:t},i)):e.jsx("div",{style:{color:"#808e9b"},children:"No logs yet..."})]})]})},w={title:"Hooks/useLazyMemo",component:g,argTypes:{size:{control:{type:"number",min:1e3,max:5e6,step:5e4},description:"Size of the generated array for heavy computation",defaultValue:1e6}}},l={render:n=>e.jsx(g,{...n})};l.parameters={...l.parameters,docs:{...l.parameters?.docs,source:{originalSource:`{
  render: args => <LazyMemoDemo {...args} />
}`,...l.parameters?.docs?.source}}};const S=["Default"];export{l as Default,S as __namedExportsOrder,w as default};
